{{ define "main" }}
<article class="article-page">
  <header class="article-header">
    <div class="container">
      <p class="hero-eyebrow">{{ .Section | title }}</p>
      <h1>{{ .Title }}</h1>
      <div class="article-meta">
        <span>{{ if .Params.author }}{{ .Params.author }}{{ else }}{{ .Site.Params.author }}{{ end }}</span>
        <span class="meta-separator">•</span>
        <time datetime="{{ .PublishDate.Format "2006-01-02" }}">{{ .PublishDate.Format "January 2, 2006" }}</time>
        {{ if .Params.readTime }}
        <span class="meta-separator">•</span>
        <span>{{ .Params.readTime }}</span>
        {{ end }}
      </div>
    </div>
  </header>

  {{ if .Params.image }}
  <div class="container">
    <figure class="article-cover">
      <img src="{{ .Params.image }}" alt="{{ .Title }}" width="1200" height="630" loading="lazy" />
    </figure>
  </div>
  {{ end }}

  <div class="container article-layout">
    <div class="article-content">{{ .Content }}</div>

    <aside class="article-sidebar">
      <div class="sidebar-card">
        <h2>Quick Context</h2>
        <ul>
          <li><strong>Section:</strong> {{ .Section | title }}</li>
          {{ if .Params.categories }}
          <li><strong>Category:</strong> {{ delimit .Params.categories ", " }}</li>
          {{ end }}
          {{ if .Params.tags }}
          <li><strong>Tags:</strong> {{ delimit .Params.tags ", " }}</li>
          {{ end }}
        </ul>
      </div>

      <div class="sidebar-card">
        <h2>Share</h2>
        <div class="share-buttons">
          <a href="https://twitter.com/intent/tweet?url={{ .Permalink }}&text={{ .Title }}" target="_blank" rel="noopener" class="share-btn">Twitter</a>
          <a href="https://www.facebook.com/sharer/sharer.php?u={{ .Permalink }}" target="_blank" rel="noopener" class="share-btn">Facebook</a>
        </div>
      </div>

      <div class="sidebar-card affiliate-notice">
        <p><strong>Disclosure:</strong> {{ .Site.Params.affiliateDisclosure }}</p>
      </div>
    </aside>
  </div>

  <div class="container">
    {{ if .Params.tags }}
    <div class="post-tags">
      <strong>Tags:</strong>
      {{ range .Params.tags }}
      <a href="/tags/{{ . | urlize }}/" class="tag">#{{ . }}</a>
      {{ end }}
    </div>
    {{ end }}

    <nav class="post-navigation">
      {{ with .PrevInSection }}
      <a href="{{ .Permalink }}" class="nav-prev">
        <span class="nav-label">← Previous</span>
        <span class="nav-title">{{ .Title }}</span>
      </a>
      {{ end }}
      {{ with .NextInSection }}
      <a href="{{ .Permalink }}" class="nav-next">
        <span class="nav-label">Next →</span>
        <span class="nav-title">{{ .Title }}</span>
      </a>
      {{ end }}
    </nav>
  </div>
</article>
{{ end }}
