{
  "services": {
    "mailchimp": {
      "name": "Mailchimp",
      "endpoint": "https://us1.api.mailchimp.com/3.0/lists/{list_id}/members",
      "method": "POST",
      "headers": {
        "Authorization": "Basic {api_key_base64}",
        "Content-Type": "application/json"
      },
      "payload_template": {
        "email_address": "{email}",
        "status": "subscribed",
        "merge_fields": {
          "SOURCE": "{source}",
          "TIMESTAMP": "{timestamp}"
        }
      },
      "config_required": [
        "MAILCHIMP_API_KEY",
        "MAILCHIMP_LIST_ID"
      ],
      "documentation": "https://mailchimp.com/developer/marketing/api/list-members/"
    },
    "convertkit": {
      "name": "ConvertKit", 
      "endpoint": "https://api.convertkit.com/v3/forms/{form_id}/subscribe",
      "method": "POST",
      "headers": {
        "Content-Type": "application/json"
      },
      "payload_template": {
        "api_key": "{api_key}",
        "email": "{email}",
        "fields": {
          "source": "{source}",
          "signup_timestamp": "{timestamp}"
        }
      },
      "config_required": [
        "CONVERTKIT_API_KEY",
        "CONVERTKIT_FORM_ID"
      ],
      "documentation": "https://developers.convertkit.com/#add-subscriber-to-a-form"
    },
    "emailjs": {
      "name": "EmailJS (Client-side)",
      "endpoint": "https://api.emailjs.com/api/v1.0/email/send",
      "method": "POST",
      "headers": {
        "Content-Type": "application/json"
      },
      "payload_template": {
        "service_id": "{service_id}",
        "template_id": "{template_id}",
        "user_id": "{user_id}",
        "template_params": {
          "to_email": "deals@dealradarus.com",
          "from_email": "{email}",
          "message": "New newsletter subscription from {source}",
          "subscriber_email": "{email}",
          "source": "{source}",
          "timestamp": "{timestamp}"
        }
      },
      "config_required": [
        "EMAILJS_SERVICE_ID",
        "EMAILJS_TEMPLATE_ID", 
        "EMAILJS_USER_ID"
      ],
      "documentation": "https://www.emailjs.com/docs/"
    },
    "custom_api": {
      "name": "Custom API Endpoint",
      "endpoint": "{custom_endpoint}",
      "method": "POST",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer {api_token}"
      },
      "payload_template": {
        "email": "{email}",
        "source": "{source}",
        "timestamp": "{timestamp}",
        "user_agent": "{user_agent}",
        "referrer": "{referrer}"
      },
      "config_required": [
        "CUSTOM_ENDPOINT",
        "CUSTOM_API_TOKEN"
      ]
    }
  },
  "validation": {
    "email_regex": "^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$",
    "max_email_length": 254,
    "blocked_domains": [
      "tempmail.org",
      "10minutemail.com",
      "guerrillamail.com",
      "mailinator.com",
      "yopmail.com",
      "throwaway.email",
      "spam4.me",
      "getairmail.com"
    ],
    "rate_limiting": {
      "max_attempts_per_email": 3,
      "max_attempts_per_ip": 10,
      "time_window_minutes": 60
    }
  },
  "responses": {
    "success": {
      "default": "Thanks for subscribing! Check your email to confirm.",
      "already_subscribed": "You're already subscribed! Check your email for our latest updates."
    },
    "errors": {
      "invalid_email": "Please enter a valid email address.",
      "disposable_email": "Please use a non-disposable email address.",
      "rate_limited": "Too many attempts. Please try again later.",
      "network_error": "Network error. Please check your connection and try again.",
      "service_unavailable": "Newsletter service temporarily unavailable. Please try again later.",
      "unknown_error": "Something went wrong. Please try again."
    }
  },
  "analytics": {
    "ga4_events": {
      "submit_attempt": "newsletter_submit_attempt",
      "submit_success": "newsletter_submit_success", 
      "submit_error": "newsletter_submit_error",
      "validation_error": "newsletter_validation_error"
    },
    "facebook_pixel_events": {
      "subscribe_success": "Subscribe",
      "subscribe_attempt": "InitiateCheckout"
    }
  },
  "integration_notes": {
    "mailchimp": {
      "setup_steps": [
        "1. Create Mailchimp account and audience/list",
        "2. Generate API key in Account -> Extras -> API keys",
        "3. Get List ID from Audience -> Settings -> Audience name and campaign defaults",
        "4. Set environment variables: MAILCHIMP_API_KEY, MAILCHIMP_LIST_ID"
      ],
      "double_optin": true,
      "webhook_support": true
    },
    "convertkit": {
      "setup_steps": [
        "1. Create ConvertKit account and form",
        "2. Get API key from Account -> Settings -> Advanced",
        "3. Get Form ID from Forms -> [Form Name] -> Settings",
        "4. Set environment variables: CONVERTKIT_API_KEY, CONVERTKIT_FORM_ID"
      ],
      "double_optin": true,
      "webhook_support": true
    },
    "emailjs": {
      "setup_steps": [
        "1. Create EmailJS account and email service",
        "2. Create email template for newsletter notifications",
        "3. Get Service ID, Template ID, and User ID",
        "4. Configure client-side integration (no server required)"
      ],
      "double_optin": false,
      "webhook_support": false,
      "note": "Client-side only, sends email notifications to admin"
    }
  }
}